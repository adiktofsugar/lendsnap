-   hosts: db
    tasks:
    -   name: Start db data
        command: >
            {{ project_root }}/ansible/commands/data-db-start
        ignore_errors: true

    -   name: Stop db
        command: docker rm -f db
        ignore_errors: true

    -   name: Start db
        command: >
            {{ project_root }}/ansible/commands/db-start
                -r {{ db_root_password }}
                -n {{ db_name }}
                -u {{ db_user }}
                -p {{ db_password }}

-   hosts: webapp
    tasks:
    -   name: Start data
        command: >
            {{ project_root }}/ansible/commands/data-uploaded-start
        ignore_errors: true

    -   name: Stop node
        command: docker rm -f node-webapp
        ignore_errors: true

    -   name: Build node
        command: >
            docker build -t node {{ project_root }}/code/node

    -   name: Start node
        command: >
            {{ project_root }}/ansible/commands/node-start {{ dev_mode_option }}

    -   name: Stop nginx
        command: docker rm -f nginx
        ignore_errors: true

    -   name: Build nginx
        command: >
            docker build -t nginx {{ project_root }}/code/nginx

    -   name: Start nginx
        command: >
            {{ project_root }}/ansible/commands/nginx-start {{ dev_mode_option }}


